.button {
  $this: &;

  background: transparent;
  border: 0;
  cursor: pointer;
  padding: 0;
  text-decoration: none;
  user-select: none;

  &--block {
    display: block;
  }

  /** Primary **/

  &--primary {
    min-width: $button-width;
    position: relative;
    margin-right: .5rem;
  }

  &--round {
    min-width: $button-width-round;
    width: $button-width-round;
  }

  &--stretch {
    width: 100%;
  }

  &--disabled {
    cursor: default;
    opacity: $disabled-opacity;
  }

  &--selected {
    cursor: default;
  }

  &__wrap {
    height: $button-height + .5rem;
    margin-right: -.5rem;
  }

  &__back {
    @include shadow;
    @include transition(box-shadow $transition-time $transition-ease, border-color $transition-time $transition-ease, background-color $transition-time $transition-ease);

    background: var(--theme-color-lighter);
    border-radius: $button-height;
    border: $border;
    bottom: 0;
    height: $button-height;
    left: 0;
    position: absolute;
    width: 100%;

    #{$this}--round & {
      margin-right: 1.4rem;
      width: $button-width-round;
    }

    #{$this}--disabled & {
      background: var(--main-color-lighter);
      border-color: var(--main-color);
    }

    #{$this}--colored:not(#{$this}--disabled) & {
      background: var(--theme-color-dark);
    }

    #{$this}:not(#{$this}--selected):not(#{$this}--disabled):hover & {
      @include shadow(-2px, 1px);
    }

    #{$this}--selected & {
      @include shadow(-1px, 1px);
    }

    &:before {
      background: var(--theme-color-lighter);
      border: $border;
      border-bottom: 0;
      border-right: 0;
      content: '';
      height: .5rem;
      left: 0;
      position: absolute;
      top: 1.6rem;
      width: $button-width-round - .2rem;
      transform: rotate(46.5deg);

      #{$this}--round & {
        border-right: $border;
      }

      #{$this}--disabled & {
        border-color: var(--main-color);
      }

      #{$this}:not(#{$this}--selected):hover & {
        height: .3rem;
        top: 1.7rem;
      }

      #{$this}--selected & {
        height: .1rem;
        top: 1.8rem;
      }
    }

    &:after {
      #{$this}:not(#{$this}--round) & {
        content: '';
      }

      border: $border;
      height: .7rem;
      position: absolute;
      right: -.4rem;
      top: 1.2rem;
      transform: rotate(46.5deg);
      width: $button-width-round;

      #{$this}--disabled & {
        border-color: var(--main-color);
      }

      #{$this}:not(#{$this}--round)#{$this}:not(#{$this}--selected):hover & {
        height: .5rem;
        top: 1.3rem;
      }

      #{$this}:not(#{$this}--round)#{$this}--selected & {
        height: .3rem;
        top: 1.4rem;
      }
    }

    &:before,
    &:after {
      @include transition(margin $transition-time $transition-ease, border-color $transition-time $transition-ease, background-color $transition-time $transition-ease);
    }
  }

  &__front {
    @include transition(margin $transition-time $transition-ease, border-color $transition-time $transition-ease, background-color $transition-time $transition-ease);

    align-items: center;
    background: var(--background-color);
    border-radius: $button-height;
    border: $border;
    display: flex;
    height: $button-height;
    justify-content: center;
    left: 0;
    margin-left: .4rem;
    margin-top: .1rem;
    padding: 0 1.8rem;
    position: absolute;
    top: 0;
    width: 100%;

    #{$this}--round & {
      width: $button-width-round;
    }

    #{$this}--disabled & {
      border-color: var(--main-color);
      background: var(--background-color);
    }

    #{$this}:not(#{$this}--selected):not(#{$this}--disabled):hover & {
      margin-left: .3rem;
      margin-top: .2rem
    }

    #{$this}--selected & {
      background: var(--theme-color);
      margin-left: .2rem;
      margin-top: .3rem;
    }

    #{$this}--colored:not(#{$this}--disabled)  & {
      background: var(--theme-color);
    }
  }

  &__content {
    @include transition(color $transition-time $transition-ease);

    align-items: center;
    color: var(--theme-color-darker);
    display: flex;
    font-size: $font-size-large;
    height: $button-height;
    justify-content: center;
    width: 100%;
    height: 100%;

    #{$this}--round & {
      width: $button-width-round;
    }

    #{$this}--disabled  & {
      color: var(--main-color);
    }

    #{$this}--selected &,
    #{$this}--colored:not(#{$this}--disabled) & {
      color: var(--background-color);
    }
  }
}
